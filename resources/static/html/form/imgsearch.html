<script type="text/javascript">
$('#j_datagrid').datagrid({
    height: '100%',
    gridTitle : '检索结果',
    showToolbar: true,
    toolbarItem: 'export,exportf',
    showCheckboxcol: true,
    local: 'local',
    dataUrl: '../../json/datagrid/datagrid.json',
    //importOption: {type:'navtab', options:{url:'../../html/form/wordinput.html'}},
    exportOption: {type:'file', options:{url:'#', loadingmask:true}},
    columns: [
        {
            name: 'hospitalcode',
            label: '医院(分中心编号)',
            align: 'center',
            width: 70
        },
        {
            name: 'patientcode',
            label: '病例编号',
            align: 'center',
            width: 70
        },

        {
            label: '病人信息',
            columns: [{
                name: 'name',
                label: '姓名',
                align: 'center',
                width: 70
            },
            {
                name: 'sex',
                label: '性别',
                align: 'center',
                width: 45,
                render: function(value) {
                    return String(value) == 'true' ? '男' : '女'
                }
            },
            {
                name: 'age',
                label: '年龄',
                align: 'center',
                type: 'number',
                width: 45,
                render: function(value) {
                    return 2015 - parseInt(value)
                }
            }]
        },
        {
            name: 'impdate',
            label: '纳入日期',
            align: 'center',
            type: 'date',
            pattern: 'yyyy-MM-dd HH:mm',
            width: 150,
            render: function(value) {
                return value ? value.substr(0, 16) : value
            }
        },
        {
            label: '联系方式',
            columns: [{

                name: 'contacts',
                label: '联系人',
                align: 'center',
                width: 70
            },
            {
                name: 'contacts',
                label: '家庭电话',
                align: 'center',
                width: 100
            },
            {
                name: 'contacts',
                label: '手机',
                align: 'center',
                width: 100
            },
                {
                name: 'contacts',
                label: '单位电话',
                align: 'center',
                width: 100
            }]
        },

    ],
    editUrl: 'json/ajaxDone.json',
    paging: {pageSize:50, pageCurrent:10},
    linenumberAll: true,
    tableWidth:'100%',
    noremove: false
})
</script>
<div class="bjui-pageHeader" style="background-color:#fff; border-bottom:none;">
    <form data-toggle="ajaxsearch" data-options="{searchDatagrid:$.CurrentNavtab.find('#datagrid-test-filter')}">
        <fieldset>
            <legend style="font-weight:normal;">页头搜索：</legend>
            <div style="margin:0; padding:1px 5px 5px;">
                <span>门诊号：</span>
                <input type="text" name="obj.code" class="form-control" size="15">

                <span>姓名：</span>
                <input type="text" name="obj.name" class="form-control" size="15">

                <div class="btn-group">
                    <button type="submit" class="btn-green" data-icon="search">开始搜索！</button>
                    <button type="reset" class="btn-orange" data-icon="times">重置</button>
                </div>
            </div>
        </fieldset>
    </form>
</div>
<div class="bjui-pageContent">
    <table id="j_datagrid" class="table table-bordered">
    </table>
</div>