<form action="" id="dir_import" data-toggle="validate" data-alertmsg="false"
      style=" padding:10px; margin: 10px; border:1px #999 solid; border-radius:5px;">
    <fieldset>
        <legend style="font-weight:normal;">选择文件夹：</legend>
        <input type="hidden" name="custom.id" value="edce142bc2ed4ec6b623aacaf602a4de">
        <div class="bjui-row col-2">

            <label class="row-label">数据URI:</label>
            <div class="row-input required">
                <input type="text" name="dir.uri" data-rule="required" id="dir_import_uri" value="file:/">
            </div>

            <label class="row-label"></label>
            <div class="row-input">
                <button type="button" class="btn-default" data-icon="save" onclick="anaylse_dir()">获取详细说明</button>
            </div>
            <!--<hr style="margin:5px 0 15px;">-->
            <!--<div class="text-center">-->
            <!--<button type="button" class="btn-default" data-icon="save" onclick="dir_submit()">确定</button>-->
            <!--</div>-->
        </div>
    </fieldset>
</form>

<form action="" id="dir_info_import" data-toggle="validate" data-alertmsg="false"
      style=" padding:10px; margin: 10px; border:1px #999 solid; border-radius:5px;">
    <fieldset>
        <legend style="font-weight:normal;">数据类型：</legend>
        <div class="bjui-row col-2">
            <label class="row-label">病人姓名:</label>
            <div class="row-input ">
                <input type="text" name="patientName" id="img_info_name">
            </div>

            <label class="row-label">病人编号:</label>
            <div class="row-input  ">
                <input type="text" name="patientId" id="img_info_patient">
            </div>

            <label class="row-label">手术术式:</label>
            <div class="row-input">
                <select data-toggle="selectpicker" data-width="200" name="surProcedure" id="surProcedure" multiple="">
                    <option value="null"></option>
                    <option value="HEARTBYPASS">心脏搭桥(植入支架)</option>
                    <option value="ENDOSCOPE">内景引导手术导航</option>
                    <option value="ARTERYFIX">主动脉修复TEVAR(植入支架)</option>
                    <option value="HEPATICVESSEL">肝血管TIPS(植入支架)</option>
                    <option value="ORTHOPEDIC">骨科手术导航</option>
                </select>
            </div>

            <label class="row-label">成像部位:</label>
            <div class="row-input  required">
                <select data-toggle="selectpicker" data-width="200" name="imageSite" multiple="">
                    <option value="null"></option>
                    <option value="CORONARY">冠脉</option>
                    <option value="AORTA">主动脉</option>
                    <option value="HEPATICVESSEL">肝血管</option>
                    <option value="BRAINVESSEL">脑血管</option>
                    <option value="RETINA">视网膜</option>
                    <option value="LIVER">肝</option>
                    <option value="KIDNEY">肾</option>
                    <option value="BRAIN">脑部</option>
                    <option value="VERTEBRAL">颈椎</option>
                    <option value="LEGBONE">腿骨</option>
                    <option value="BONES">盆骨</option>
                    <option value="SKIN">皮肤表面</option>
                    <option value="NOSE">鼻腔</option>
                    <option value="EYE">眼部</option>
                </select>
            </div>

            <label class="row-label">病变类型:</label>
            <div class="row-input  ">
                <select data-toggle="selectpicker" data-rule="required" data-width="200" name="lesionType">
                    <option value="null"></option>
                    <option value="BRAINLESION">脑肿瘤</option>
                    <option value="LIVERLESION">肝肿瘤</option>
                    <option value="ARTERYLESION">主动脉瘤</option>
                    <option value="EYELESION">眼部肿瘤</option>
                    <option value="STENOSIS">血管狭窄</option>
                    <option value="AORTICDISSECTION">主动脉夹层</option>
                    <option value="CIRRHOSIS">肝硬化</option>
                    <option value="CALCIFICATION">钙化</option>
                    <option value="NORMAL">正常</option>
                </select>
            </div>

            <label class="row-label">成像类型:</label>
            <div class="row-input  ">
                <select data-toggle="selectpicker" data-rule="required" data-width="200" name="imageType">
                    <option value="null"></option>
                    <option value="CT">CT</option>
                    <option value="4DCT">4D-CT</option>
                    <option value="MR">MR</option>
                    <option value="XRAY">X-Ray</option>
                    <option value="US">US</option>
                    <option value="ENDOSCOPEIMA">内窥镜图像</option>
                    <option value="PET">PET</option>
                    <option value="fMRI">fMRI</option>
                    <option value="POINTCLOUD">点云</option>
                    <option value="ECG">心电信号</option>
                    <option value="PIC">照片</option>
                </select>
            </div>

            <label class="row-label">来源渠道:</label>
            <div class="row-input  required">
                <select data-toggle="selectpicker" data-rule="required" data-width="200" name="source">
                    <option value="null"></option>
                    <option value="ANZHEN">安贞医院</option>
                    <option value="301DUAN">解放军总医院-段峰</option>
                    <option value="301LIANG">解放军总医院-梁萍</option>
                    <option value="XIEHEHAN">协和医院</option>
                    <option value="BITCHEN">北理工陈端端</option>
                    <option value="XINANUNI">西南大学</option>
                    <option value="TONGREN">同仁医院</option>
                    <option value="PUBLIC">公开数据集</option>
                </select>
            </div>

            <label class="row-label">采集阶段:</label>
            <div class="row-input  ">
                <select data-toggle="selectpicker" data-rule="required" data-width="200" name="stage">
                    <option value="null"></option>
                    <option value="PREOPERATIVE">术前</option>
                    <option value="INTRAOPERATIVE">术中</option>
                    <option value="POSTOPERATIVE">术后</option>
                </select>
            </div>

            <label class="row-label">是否有金标准:</label>
            <div class="row-input">
                <input type="radio" name="goldStandard" id="goldStandardYes" data-toggle="icheck" value="YES"
                       data-label="是">
                <input type="radio" name="goldStandard" id="goldStandardNO" data-toggle="icheck" value="NO"
                       data-label="否">
            </div>

            <!--<label class="row-label"></label>-->
            <!--<div class="row-input">-->
                <!--<button type="button" class="btn-default" data-icon="save" onclick="dir_submit()">确定</button>-->
            <!--</div>-->

        </div>

    </fieldset>

    <fieldset>
        <legend style="font-weight:normal;">数据用途：</legend>
        <input type="hidden" name="custom.id" value="edce142bc2ed4ec6b623aacaf602a4de">
        <div class="bjui-row col-2">

            <label class="row-label">分割:</label>
            <div class="row-input">
                <select data-toggle="selectpicker" data-width="200" name="segment">
                    <option value="null"></option>
                    <option value="Optic nerve">视神经</option>
                    <option value="Aorta">主动脉</option>
                    <option value="CoronaryArtery">冠脉</option>
                    <option value="liver">肝脏</option>
                    <option value="skeleton">骨骼</option>
                    <option value="Eye tumor">眼肿瘤</option>
                    <option value="MultipleOrgans">多器官</option>
                </select>
            </div>

            <label class="row-label">配准:</label>
            <div class="row-input">
                <select data-toggle="selectpicker" data-width="200" name="registration">
                    <option value="null"></option>
                    <option value="Brain">大脑</option>
                    <option value="Vessel">血管</option>
                    <option value="Liver">肝脏</option>
                </select>
            </div>

            <label class="row-label">重建:</label>
            <div class="row-input">
                <select data-toggle="selectpicker" data-width="200" name="reconstruct">
                    <option value="null"></option>
                    <option value="Brain">血管</option>
                    <option value="Vessel">鼻腔</option>
                    <option value="Liver">超声体数据</option>
                </select>
            </div>
            <div class="row-input">
                <input type="radio" name="VR" id="j_custom_male" data-toggle="icheck" value="VR"
                       data-label="增强现实混合渲染">
                <input type="radio" name="restoration" id="j_custom_female" data-toggle="icheck" value="restoration"
                       data-label="图像复原">
                <input type="radio" name="feature" id="j_custom_female" data-toggle="icheck" value="feature"
                       data-label="特征匹配">
            </div>


        </div>
    </fieldset>
    <hr style="margin:5px 0 15px;">
    <div class="text-center">
        <button type="submit" class="btn-default" data-icon="save">生成归档路径</button>
    </div>
</form>

<form action="" id="server" data-toggle="validate" data-alertmsg="false"
      style=" padding:10px; margin: 10px; border:1px #999 solid; border-radius:5px;">
    <fieldset>
        <legend style="font-weight:normal;">归档设置：</legend>
        <input type="hidden" name="custom.id" value="edce142bc2ed4ec6b623aacaf602a4de">
        <div class="bjui-row col-1">

            <label class="row-label">数据归档路径:</label>
            <div class="row-input required">
                <input type="text" name="dir.uri" data-rule="required" id="server-dir" value="file:/">
            </div>

            <label class="row-label">选择文件服务器:</label>
            <div class="row-input  required">
                <select data-toggle="selectpicker" data-rule="required" data-width="200" name="selectserver"
                        multiple="">
                    <option value="0">术前</option>
                    <option value="1">术中</option>
                    <option value="2">术后即时</option>
                    <option value="3">术后7天内</option>
                    <option value="4">术后一个月</option>
                    <option value="5">术后三个月</option>
                    <option value="6">术后六个月</option>
                    <option value="7">术后九个月</option>
                    <option value="8">术后十二个月</option>
                    <option value="9">术后十八个月</option>
                    <option value="11">术后二十四个月</option>
                    <option value="12">术后三十个月</option>
                    <option value="13">术后三十六个月</option>
                </select>
            </div>

            <hr style="margin:5px 0 15px;">
            <div class="text-center">
                <button type="button" class="btn-default" data-icon="save" onclick="dir_submit()">确定</button>
            </div>
        </div>
    </fieldset>
</form>


<script type="text/javascript">
    function dir_submit() {
        BJUI.ajax('doajax', {
            url: '/data/importimg',
            data: $('#img_import').serialize(),
            loadingmask: true,
            okCallback: function (json) {
                BJUI.alertmsg('ok', json.mess);

            }
        })
    }

    function anaylse_dir() {
        BJUI.ajax('doajax', {
            url: '/import/analyse',
            data: $('#dir_import').serialize(),
            loadingmask: true,
            okCallback: function (json) {
                BJUI.alertmsg('ok', json.surProcedure);
                //var anElement = $("#surProcedure");anElement.attr("anyAttribute","anyValue");
                var vvvv = json.surProcedure;
                $("#surProcedure").find("option[text=vvvv]").attr("selected",true);
                $("#surProcedure").val(json.surProcedure);

            }
        })
    }


    $("#img_info_import").submit(function () {
        BJUI.ajax('doajax', {
            url: '/data/import_info_img',
            data: $('#img_info_import').serialize(),
            loadingmask: true,
            okCallback: function (json) {
                BJUI.alertmsg('ok', json.mess);
            }
        })
    });
</script>